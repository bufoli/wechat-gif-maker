# 透明底表情包制作工具

一个微信小程序，用于将纯色背景视频转换为透明底 GIF 表情包。

## ✨ 功能特点

- 📹 **视频上传**：支持上传 10 秒以内的纯绿色或纯蓝色背景视频
- ✂️ **视频剪辑**：iOS 风格的时间轴，精确选取视频片段
- 🎨 **背景抠图**：智能色彩识别，一键去除纯色背景
- 🖼️ **视频裁剪**：双指缩放，自由调整视频区域
- ✍️ **添加文字**：支持文字拖拽、缩放、旋转
- 🎁 **GIF 导出**：自动生成 240×240px、12fps、小于 500KB 的 GIF 文件

## 📱 界面预览

### 界面一：首页
- 简洁的视频上传入口
- 清晰的使用提示

### 界面二：视频编辑
- 视频预览播放
- iOS 风格时间轴剪辑
- 三大编辑功能：抠图、裁剪、添加文字
- 一键导出 GIF

### 界面三：背景抠图
- 吸管工具提取颜色
- 色彩范围滑杆调节
- 实时透明效果预览

### 界面四：视频裁剪
- 双指缩放调整
- 正方形裁剪框

### 界面五：添加文字
- 文本输入框
- 文字拖拽、缩放、旋转
- 多种免费商用字体

## 🛠️ 技术栈

- 微信小程序原生开发
- WXML + WXSS + JavaScript
- 云开发（用于视频处理）
- Canvas API（图像处理）

## 📦 安装使用

### 1. 克隆项目

```bash
git clone https://github.com/你的用户名/你的仓库名.git
cd miniprogram-1
```

### 2. 导入微信开发者工具

1. 打开微信开发者工具
2. 选择"导入项目"
3. 选择项目目录
4. 填写 AppID（测试号或正式 AppID）

### 3. 配置云开发（可选）

如需使用 GIF 导出功能，需要配置云开发：

1. 在微信小程序管理后台开通云开发
2. 修改 `app.js` 中的云开发环境 ID：

```javascript
wx.cloud.init({
  env: '你的云开发环境ID',
  traceUser: true,
})
```

3. 部署云函数 `videoToGif`（参考 `cloud-function-example.md`）

## 📂 项目结构

```
miniprogram-1/
├── pages/              # 页面目录
│   ├── index/         # 首页（视频上传）
│   ├── video-edit/    # 视频编辑主页
│   ├── video-removebg/# 背景抠图
│   ├── video-crop/    # 视频裁剪
│   └── video-text/    # 添加文字
├── utils/             # 工具函数
│   ├── videoUtils.js  # 视频处理工具
│   └── imageUtils.js  # 图像处理工具
├── app.js             # 小程序入口
├── app.json           # 全局配置
└── app.wxss           # 全局样式
```

## 📝 导出规格

生成的 GIF 文件符合微信表情包标准：
- **尺寸**：240 × 240 像素
- **帧率**：12 FPS
- **大小**：< 500 KB
- **格式**：GIF
- **保存位置**：手机相册

## ⚠️ 注意事项

1. **视频要求**：
   - 时长：≤ 10 秒
   - 背景：纯绿色或纯蓝色
   - 格式：微信支持的视频格式

2. **权限设置**：
   - 需要授权相册读写权限
   - 需要授权摄像头权限（如使用拍摄功能）

3. **云开发**：
   - GIF 导出功能依赖云开发
   - 需要配置 FFmpeg 云函数
   - 详见 `cloud-function-example.md`

## 🔧 待完善功能

- [ ] 完整的云函数实现（GIF 生成）
- [ ] 更多字体选择
- [ ] 背景颜色自动识别
- [ ] 批量处理功能

## 📄 开源协议

MIT License

## 👥 贡献

欢迎提交 Issue 和 Pull Request！

## 📧 联系方式

如有问题，欢迎交流讨论。

---

**注意**：本项目为学习交流使用，请遵守微信小程序开发规范。
