# 如何部署云函数 - 详细步骤

## 📍 文件夹位置

`cloud/videoToFrames` 文件夹在你的项目根目录下：

```
miniprogram-1/
├── cloud/                    ← 云函数文件夹
│   └── videoToFrames/        ← 这就是你要找的文件夹！
│       ├── index.js          ← 云函数代码
│       └── package.json      ← 依赖配置
├── pages/
├── utils/
└── ...
```

## 🚀 部署步骤（在微信开发者工具中）

### 方法一：右键菜单部署（推荐）

1. **打开微信开发者工具**
   - 确保你的项目已经打开

2. **找到 `cloud` 文件夹**
   - 在左侧文件列表中，找到 `cloud` 文件夹
   - 点击展开，你会看到 `videoToFrames` 文件夹

3. **右键点击 `videoToFrames` 文件夹**
   - 在文件夹上右键
   - 会弹出一个菜单

4. **选择部署选项**
   - 在菜单中，你会看到：
     - "上传并部署：云端安装依赖" ⭐ **选择这个**
     - "上传并部署：所有文件"
     - "上传并部署：仅上传云端"
   
   **选择"上传并部署：云端安装依赖"**

5. **等待部署完成**
   - 底部会显示部署进度
   - 等待显示"部署成功"或"上传成功"

### 方法二：使用云开发控制台

1. **打开云开发控制台**
   - 在微信开发者工具顶部，点击"云开发"按钮
   - 或者点击工具栏中的"云开发"图标

2. **进入云函数页面**
   - 在云开发控制台中，点击左侧菜单的"云函数"
   - 你会看到云函数列表

3. **找到 `videoToFrames` 云函数**
   - 在列表中查找 `videoToFrames`
   - 如果存在，点击右侧的"上传并部署"
   - 如果不存在，点击"新建云函数"，输入名称 `videoToFrames`

4. **等待部署完成**

## ✅ 如何确认部署成功？

### 方法1：查看云开发控制台
1. 打开云开发控制台
2. 点击"云函数"
3. 在列表中查看 `videoToFrames`
4. 如果看到"已部署"或绿色的状态，说明部署成功

### 方法2：查看部署日志
1. 在微信开发者工具底部，查看"调试器"面板
2. 切换到"Console"标签
3. 部署时会显示日志信息
4. 如果看到"部署成功"或没有错误，说明部署成功

### 方法3：测试调用
1. 上传一个视频
2. 查看控制台日志
3. 如果看到 `开始处理视频:` 和 `视频文件下载成功:`，说明云函数已部署并能正常调用

## ⚠️ 常见问题

### Q1: 找不到 `cloud` 文件夹？
**A:** 确保你在项目根目录下查看。`cloud` 文件夹应该在和 `pages`、`utils` 同级的位置。

### Q2: 右键菜单中没有"上传并部署"选项？
**A:** 可能的原因：
1. 没有开通云开发
   - 在微信开发者工具中，点击"云开发"按钮
   - 按照提示开通云开发服务
2. 没有选择正确的文件夹
   - 确保右键点击的是 `videoToFrames` 文件夹，不是 `cloud` 文件夹
3. 云开发环境未初始化
   - 检查 `app.js` 中是否初始化了云开发

### Q3: 部署失败怎么办？
**A:** 
1. 检查网络连接
2. 检查云开发是否已开通
3. 查看错误信息，告诉我具体的错误内容

### Q4: 如何查看云函数代码？
**A:**
1. 在微信开发者工具左侧文件列表中
2. 找到 `cloud/videoToFrames/index.js`
3. 双击打开即可查看和编辑代码

## 📝 部署后的下一步

部署成功后：
1. **重新编译小程序**
   - 在微信开发者工具中点击"编译"按钮

2. **测试功能**
   - 上传一个视频
   - 查看控制台日志
   - 应该能看到云函数被调用的日志

3. **如果还有问题**
   - 查看控制台日志
   - 告诉我具体的错误信息

## 🎯 快速检查清单

- [ ] 找到了 `cloud/videoToFrames` 文件夹
- [ ] 右键点击文件夹，选择了"上传并部署：云端安装依赖"
- [ ] 等待部署完成（看到"部署成功"）
- [ ] 在云开发控制台确认云函数已部署
- [ ] 重新编译小程序
- [ ] 测试上传视频功能

---

**如果还是找不到文件夹，告诉我你在微信开发者工具中看到了什么，我会帮你定位！**
